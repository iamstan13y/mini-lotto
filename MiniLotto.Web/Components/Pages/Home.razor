@page "/"
@rendermode InteractiveServer

<PageTitle>Home</PageTitle>

@inject IHttpService _httpService

<h3>User Input</h3>

<div>
    <label>Name:</label>
    <input @bind="playerName" />
</div>
<div>
    <label>Numbers:</label>
    @for (int i = 0; i < 6; i++)
    {
        var index = i;
        <input type="number" value="@numbers[index]" @oninput="@(e => OnNumberInput(e, index))" min="1" max="12" />
    }
</div>
<button @onclick="SavePlayer">Save</button>

@code {
    private string playerName;
    private int[] numbers = new int[6];

    private void OnNumberInput(ChangeEventArgs e, int index)
    {
        if (int.TryParse(e.Value?.ToString(), out var value))
        {
            numbers[index] = value;
        }
    }

    private async Task SavePlayer()
    {
        var player = new PlayerRequest { Name = playerName, Numbers = numbers.ToList() };
        await _httpService.AddPlayerAsync(player);
    }
}
